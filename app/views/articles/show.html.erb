<h1>Articles</h1>

<h2><%= @article.title %> </h2><p>by: <strong><%= @article.user.username %></strong></p>

<p><%= @article.content %></p>

<%= link_to "Back", root_path %>&nbsp&nbsp
<% if current_user == @article.user %>
    <%= link_to "Edit", edit_article_path(@article) %>
    <%= button_to "Delete", article_path(@article), method: :delete, data: { confirm: "Are you sure?" } %><br>
    <%= link_to "Add New Article", new_article_path %>
<% end %>

<h3>Comments</h3>

<% if @article.comments.any? %>
  <ul>
    <% @article.comments.each do |comment| %>
      <li>
        <strong><%= comment.user.username %>:</strong>
        <%= comment.content %>
        <% if comment.user == current_user %>
          <%= button_to 'Delete', article_comment_path(@article, comment), method: :delete, data: { confirm: "Are you sure you want to delete this comment?" } %>
        <% end %>
      </li>
    <% end %>
  </ul>
<% else %>
  <p>Dont't have any comment.</p>
<% end %>

<% if user_signed_in? %>
  <h4>Post a Comment</h4>
  <%= form_with(model: [@article, Comment]) do |form| %>
    <div>
      <%= form.text_area :content, placeholder: "Write your comment here..." %>
    </div>
    <div>
      <%= form.submit "Post Comment" %>
    </div>
  <% end %>
<% end %>